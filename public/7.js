(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{U8xY:function(t,e,a){"use strict";a.r(e);var r=a("o0o1"),n=a.n(r);function i(t,e,a,r,n,i,o){try{var s=t[i](o),c=s.value}catch(t){return void a(t)}s.done?e(c):Promise.resolve(c).then(r,n)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(r,n){var o=t.apply(e,a);function s(t){i(o,r,n,s,c,"next",t)}function c(t){i(o,r,n,s,c,"throw",t)}s(void 0)}))}}var s={name:"MyProfile",data:function(){return{profileLoading:!1,profileData:{}}},computed:{currentUserId:function(){return this.$store.getters.userId},pageTitle:function(){var t,e,a,r;return"".concat(null!==(t=this.profileData.jenjang)&&void 0!==t?t:""," ").concat(null!==(e=this.profileData.nama_prodi)&&void 0!==e?e:""," ").concat(null!==(a=null===(r=this.profileData.pt)||void 0===r?void 0:r.lengkap)&&void 0!==a?a:"")}},methods:{getProfileData:function(){var t=this;return o(n.a.mark((function e(){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.profileLoading=!0,e.prev=1,e.next=4,window.axios("/api/kpbi/profile");case 4:a=e.sent,r=a.data,t.profileData=r,"warn"in r&&t.$emit("notice",{message:r.warn,type:"warning"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.$emit("noticeError",e.t0);case 13:t.profileLoading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},save:function(t){var e=this;return o(n.a.mark((function a(){var r,i,o,s,c;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.bio,i=t.newImg,e.$store.commit("contentLoading",!0),a.prev=2,a.next=5,window.axios.put("/api/kpbi/profile",r);case 5:o=a.sent,e.$emit("notice",{message:o.data.message,type:"success"}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),e.$emit("noticeError",a.t0);case 12:if(!i.pt){a.next=24;break}return(s=new FormData).append("pt_img",i.pt),a.prev=15,a.next=18,window.axios.post("/api/kpbi/profile/pt-image",s,{"Content-Type":"multipart/form-data"});case 18:a.sent,a.next=24;break;case 21:a.prev=21,a.t1=a.catch(15),e.$emit("noticeError",a.t1);case 24:if(!i.kaprodi){a.next=36;break}return(c=new FormData).append("kaprodi_img",i.kaprodi),a.prev=27,a.next=30,window.axios.post("/api/kpbi/profile/kaprodi-image",c,{"Content-Type":"multipart/form-data"});case 30:a.sent,a.next=36;break;case 33:a.prev=33,a.t2=a.catch(27),e.$emit("noticeError",a.t2);case 36:e.getProfileData(),e.$store.commit("contentLoading",!1);case 38:case"end":return a.stop()}}),a,null,[[2,9],[15,21],[27,33]])})))()}},mounted:function(){this.getProfileData()},watch:{currentUserId:function(){this.getProfileData()}},components:{ProfileCard:a("SJBf").a}},c=a("KHd+"),p=Object(c.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",{attrs:{fluid:""}},[e("v-row",{attrs:{justify:"center"}},[e("h1",{staticClass:"text-h5 my-6"},[this._v(this._s(this.pageTitle))])]),this._v(" "),e("v-row",{attrs:{justify:"center"}},[e("ProfileCard",{attrs:{"can-edit":!0,profileData:this.profileData,isLoading:this.profileLoading},on:{"profile-update":this.save}})],1)],1)}),[],!1,null,null,null);e.default=p.exports}}]);